---
import MainLayout from '../../../layouts/MainLayout.astro';
import { getCollection } from 'astro:content';
import SongCard from '../../../components/cards/SongCard.astro';
import Header from '../../../components/global/Header.astro'; // IMPORT HEADER
import Footer from '../../../components/global/Footer.astro'; // IMPORT FOOTER

export async function getStaticPaths() {
  return [
    { params: { lang: 'en' } },
    // Add other languages here as needed:
    // { params: { lang: 'es' } },
  ];
}

const { lang } = Astro.params;
const allSongs = await getCollection('songs', ({ id }) =>
  id.startsWith(`${lang}/`)
);
---

<MainLayout title={`Songs - Whispora.space`} description="A collection of enchanting songs for children.">
  <Header slot="header" /> {/* ADD THIS LINE TO SLOT THE HEADER */}

  <section class="container-custom py-16">
    <h1 class="text-4xl md:text-5xl font-extrabold text-center text-gray-800 mb-12">
      Magical Songs
    </h1>

    {allSongs.length === 0 ? (
      <p class="text-center text-gray-600 text-lg">No songs found in this language yet. Check back soon!</p>
    ) : (
      <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8">
        {allSongs.map((song) => (
          <SongCard song={song} lang={lang} />
        ))}
      </div>
    )}

    <div class="text-center mt-12">
      <a href={`/${lang}/`} class="inline-block bg-blue-600 text-white px-6 py-3 rounded-full text-lg font-semibold hover:bg-blue-700 transition-colors">
        &larr; Back to Home
      </a>
    </div>
  </section>

  <Footer slot="footer" /> {/* ADD THIS LINE TO SLOT THE FOOTER */}
</MainLayout>
