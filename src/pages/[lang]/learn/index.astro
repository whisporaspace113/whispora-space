---
import MainLayout from '../../../layouts/MainLayout.astro';
import { getCollection } from 'astro:content';
import LearningModuleCard from '../../../components/cards/LearningModuleCard.astro'; // We'll create this next

export async function getStaticPaths() {
  return [
    { params: { lang: 'en' } },
    // Add other languages here as needed:
    // { params: { lang: 'es' } },
  ];
}

const { lang } = Astro.params;
const allLearningModules = await getCollection('learning_modules', ({ id }) =>
  id.startsWith(`${lang}/`)
);
---

<MainLayout title={`Learning Hub - Whispora.space`} description="Engaging and fun learning activities for children.">
  <section class="container-custom py-16">
    <h1 class="text-4xl md:text-5xl font-extrabold text-center text-gray-800 mb-12">
      Learning Hub
    </h1>

    {allLearningModules.length === 0 ? (
      <p class="text-center text-gray-600 text-lg">No learning modules found in this language yet. Check back soon!</p>
    ) : (
      <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8">
        {allLearningModules.map((module) => (
          <LearningModuleCard module={module} lang={lang} />
        ))}
      </div>
    )}

    <div class="text-center mt-12">
      <a href={`/${lang}/`} class="inline-block bg-blue-600 text-white px-6 py-3 rounded-full text-lg font-semibold hover:bg-blue-700 transition-colors">
        &larr; Back to Home
      </a>
    </div>
  </section>
</MainLayout>
