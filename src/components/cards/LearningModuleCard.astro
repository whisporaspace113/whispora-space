---
interface Props {
  module: {
    id: string; // Used to derive the URL slug
    data: {
      title: string;
      description: string;
      image?: string;
      difficulty?: 'easy' | 'medium' | 'hard';
    };
  };
  lang: string;
}

const { module, lang } = Astro.props;

// Calculate the actual slug needed for the URL, by removing the language prefix from module.id
const moduleSlugForUrl = module.id.split('/').slice(1).join('/');

// Define color for difficulty for visual flair
let difficultyColor = 'text-gray-500';
switch (module.data.difficulty) {
    case 'easy':
        difficultyColor = 'text-green-600';
        break;
    case 'medium':
        difficultyColor = 'text-yellow-600';
        break;
    case 'hard':
        difficultyColor = 'text-red-600';
        break;
}
---
<a href={`/${lang}/learn/${moduleSlugForUrl}`} class="block bg-white rounded-lg shadow-md hover:shadow-lg transition-shadow duration-300 overflow-hidden">
  {module.data.image && (
    <img
      src={module.data.image}
      alt={module.data.title}
      class="w-full h-48 object-cover"
      loading="lazy"
    />
  )}
  <div class="p-5">
    <h3 class="text-xl font-bold text-gray-800 mb-2">{module.data.title}</h3>
    <p class="text-gray-600 text-sm line-clamp-3 mb-3">{module.data.description}</p>
    {module.data.difficulty && (
      <span class={`text-xs font-semibold uppercase ${difficultyColor}`}>
        {module.data.difficulty}
      </span>
    )}
    <span class="mt-4 inline-block text-blue-600 hover:text-blue-800 font-semibold text-sm">Start Learning &rarr;</span>
  </div>
</a>
